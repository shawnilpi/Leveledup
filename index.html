<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Shawni — Luxe Greeting Widget (Framed by Default)</title>
  <style>
    /*
      Luxe, developer‑grade card — framed by default.
      - Rounded corners + layered shadow + subtle hairline to feel premium in Notion
      - Responsive type via --scale (auto from container width)
      - Toggle frameless with ?frame=0 if you ever want to remove the inner card
    */
    :root{
      --scale: 1;               /* computed by JS based on container width */
      --bg: #fff;               /* framed default */
      --fg: #111;
      --muted: #555;
      --radius: 16px;
      --hairline: rgba(0,0,0,0.08);
      --shadowA: 0 1px 2px rgba(15,23,42,0.06);
      --shadowB: 0 8px 24px rgba(15,23,42,0.10);
      --font-heading: "Georgia", "Times New Roman", serif; /* swap to exact Canva font when ready */
      --font-body: "Inter", ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
    }
    html,body{height:100%;margin:0}
    body{background:transparent;color:var(--fg)}

    .wrap{ width:100%; display:grid; place-items:stretch; }

    .card{
      width: 100%;                  /* fills Notion embed width */
      max-width: 520px;             /* looks clean in most columns */
      background: var(--bg);
      position: relative; overflow: hidden; box-sizing: border-box;
      padding: calc(14px * var(--scale)) calc(16px * var(--scale));
      display: grid; grid-template-rows: auto auto 1fr; row-gap: calc(8px * var(--scale));
      font-family: var(--font-body);
      border-radius: calc(var(--radius) * var(--scale));
      box-shadow: var(--shadowA), var(--shadowB);
      border: 1px solid var(--hairline);
    }

    /* Frameless mode when URL has ?frame=0 */
    .frameless .card{ background: transparent; border: 0; box-shadow: none; border-radius: 0; }

    /* Greeting */
    .greet{ font-family: var(--font-heading); font-weight: 700; font-size: calc(20px * var(--scale)); line-height: 1.15; margin-right: calc(68px * var(--scale)); letter-spacing: .2px; }

    /* Date */
    .date{ font-size: calc(13px * var(--scale)); color: #111; margin-right: calc(68px * var(--scale)); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; line-height: 1.25; }

    /* Weather */
    .wx{ position:absolute; right: calc(12px * var(--scale)); top: calc(12px * var(--scale)); display:grid; justify-items:center; gap: calc(6px * var(--scale)); width: calc(56px * var(--scale)); }
    .wx svg{ width: calc(28px * var(--scale)); height: calc(28px * var(--scale)); stroke:#111; }
    .temp{ font-size: calc(12px * var(--scale)); font-variant-numeric: tabular-nums; color:#111; letter-spacing: .2px; }
    .deg{ font-size: 85%; vertical-align: 10%; }

    /* Clock */
    .clock-wrap{ position:relative; margin-top: calc(4px * var(--scale)); }
    .clock{ display:inline-flex; align-items:baseline; gap: calc(8px * var(--scale)); }
    .time-main{ font-family: var(--font-heading); font-weight: 600; font-variant-numeric: tabular-nums; letter-spacing: calc(1.6px * var(--scale)); line-height: 1; font-size: calc(22px * var(--scale)); }
    .colon{ opacity:.75; padding: 0 .5px; }
    .time-sec{ font-family: var(--font-heading); font-weight: 600; font-variant-numeric: tabular-nums; font-size: calc(15px * var(--scale)); color: var(--muted); transform: translateY(calc(-2px * var(--scale))); letter-spacing: .5px; }
  </style>
</head>
<body>
  <div class="wrap" id="wrap">
    <section class="card" id="card">
      <div class="greet" id="greet">Good Morning, Shawni</div>
      <div class="date" id="date">Wednesday · August 28th, 2025</div>

      <div class="wx" id="wx" aria-live="polite">
        <div id="icon" aria-label="weather icon"></div>
        <div class="temp" id="temp">—<span class="deg">°</span>F</div>
      </div>

      <div class="clock-wrap">
        <div class="clock">
          <div class="time-main" id="timeMain">00<span class="colon">:</span>00</div>
          <div class="time-sec" id="timeSec">00</div>
        </div>
      </div>
    </section>
  </div>

  <script>
    const CONFIG = { name: "Shawni", timeZone: "America/Denver", lat: 32.0, lon: -106.6, weatherRefreshMs: 10*60*1000 };

    // Frameless toggle via ?frame=0 (default is framed)
    (function(){ try{ const off = new URLSearchParams(location.search).get('frame')==='0'; if (off) document.getElementById('wrap').classList.add('frameless'); }catch(e){} })();

    // Fluid scale: base layout assumes 360px. Scale all sizes to container width.
    (function(){
      const card = document.getElementById('card');
      const ro = new ResizeObserver(entries => {
        const w = entries[0].contentRect.width;
        const scale = Math.max(0.75, Math.min(1.8, w / 360)); // clamp 0.75x–1.8x
        document.documentElement.style.setProperty('--scale', scale.toFixed(3));
      });
      ro.observe(card);
    })();

    function partOfDay(h){ if(h>=5&&h<12) return "Morning"; if(h>=12&&h<17) return "Afternoon"; if(h>=17&&h<21) return "Evening"; return "Night"; }
    function ordinal(n){ const s=["th","st","nd","rd"], v=n%100; return n+(s[(v-20)%10]||s[v]||s[0]); }
    function fmtDate(d){ const parts=new Intl.DateTimeFormat('en-US',{weekday:'long',month:'long',day:'numeric',year:'numeric',timeZone:CONFIG.timeZone}).formatToParts(d); const o={}; parts.forEach(p=>o[p.type]=p.value); const n=Number(o.day); const dayStr=Number.isFinite(n)?ordinal(n):o.day; return `${o.weekday} · ${o.month} ${dayStr}, ${o.year}`; }

    function tick(){
      const now=new Date(); const zoned=new Date(now.toLocaleString('en-US',{timeZone:CONFIG.timeZone}));
      const h=zoned.getHours(), m=zoned.getMinutes(), s=zoned.getSeconds();
      document.getElementById('greet').textContent=`Good ${partOfDay(h)}, ${CONFIG.name}`;
      document.getElementById('date').textContent=fmtDate(zoned);
      const hh=String(h).padStart(2,'0'), mm=String(m).padStart(2,'0'), ss=String(s).padStart(2,'0');
      document.getElementById('timeMain').innerHTML=`${hh}<span class='colon'>:</span>${mm}`;
      document.getElementById('timeSec').textContent=ss;
    }

    async function fetchWeather(){
      const url=`https://api.open-meteo.com/v1/forecast?latitude=${CONFIG.lat}&longitude=${CONFIG.lon}&current=temperature_2m,weather_code&temperature_unit=fahrenheit&timezone=${encodeURIComponent(CONFIG.timeZone)}`;
      try{
        const res=await fetch(url,{cache:'no-store'}); const data=await res.json();
        const code=data?.current?.weather_code; const tempF=Math.round(data?.current?.temperature_2m);
        document.getElementById('icon').innerHTML=iconFor(code);
        document.getElementById('temp').innerHTML=`${tempF}<span class='deg'>°</span>F`;
      }catch(e){ console.warn('Weather fetch failed', e); }
    }

    function iconFor(code){ const n=Number(code); const clear=[0,1], part=[2], cloudy=[3,45,48], rain=[51,53,55,56,57,61,63,65,66,67,80,81,82], snow=[71,73,75,77,85,86], storm=[95,96,99]; if(clear.includes(n)) return sun(); if(part.includes(n)) return sunCloud(); if(cloudy.includes(n))return cloud(); if(rain.includes(n))return rainIcon(); if(snow.includes(n))return snowIcon(); if(storm.includes(n))return stormIcon(); return sun(); }
    function sun(){return `<svg viewBox='0 0 24 24' fill='none' stroke='black' stroke-width='1.25' aria-hidden='true'><circle cx='12' cy='12' r='4'/><g stroke-linecap='round'><path d='M12 2v2M12 20v2M4 12H2M22 12h-2M5 5l1.5 1.5M17.5 17.5L19 19M5 19l1.5-1.5M17.5 6.5L19 5'/></g></svg>`}
    function cloud(){return `<svg viewBox='0 0 24 24' fill='none' stroke='black' stroke-width='1.25' aria-hidden='true'><path d='M7 18h10a4 4 0 0 0 0-8 6 6 0 0 0-11-1.5A4.5 4.5 0 0 0 7 18z'/></svg>`}
    function sunCloud(){return `<svg viewBox='0 0 24 24' fill='none' stroke='black' stroke-width='1.25' aria-hidden='true'><circle cx='7' cy='7' r='2.8'/><path d='M7 2v1.5M7 10.5V12M2 7h1.5M10.5 7H12M3.9 3.9l1 1M9.1 3.9l-1 1'/><path d='M9 18h8a3.5 3.5 0 0 0 0-7 5.5 5.5 0 0 0-10.2-1.2'/></svg>`}
    function rainIcon(){return `<svg viewBox='0 0 24 24' fill='none' stroke='black' stroke-width='1.25' aria-hidden='true'><path d='M6 16h10a4 4 0 0 0 0-8 6 6 0 0 0-11-1.5A4.5 4.5 0 0 0 6 16z'/><path d='M8 18l-1 3M12 18l-1 3M16 18l-1 3' stroke-linecap='round'/></svg>`}
    function snowIcon(){return `<svg viewBox='0 0 24 24' fill='none' stroke='black' stroke-width='1.25' aria-hidden='true'><path d='M6 16h10a4 4 0 0 0 0-8 6 6 0 0 0-11-1.5A4.5 4.5 0 0 0 6 16z'/><path d='M9 19l.5 2M12 19l.5 2M15 19l.5 2' stroke-linecap='round'/></svg>`}
    function stormIcon(){return `<svg viewBox='0 0 24 24' fill='none' stroke='black' stroke-width='1.25' aria-hidden='true'><path d='M6 16h10a4 4 0 0 0 0-8 6 6 0 0 0-11-1.5A4.5 4.5 0 0 0 6 16z'/><path d='M11 17l-2 4 4-2-1 3' stroke-linecap='round'/></svg>`}

    function start(){ tick(); fetchWeather(); setInterval(tick,1000); setInterval(fetchWeather,CONFIG.weatherRefreshMs);} start();
  </script>
</body>
</html>
